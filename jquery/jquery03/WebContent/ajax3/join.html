<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ajax3/join.html</title>
<script type="text/javascript" src = "../js/jquery-3.6.0.min.js"></script>
</head>
<body>
<h1>회원가입</h1>
<form method="post" action="joinOk.jsp">
	아이디 <input type="text" name="id" id="id">
    <input type="button" value="중복확인"> 
	<span id="idcheck"></span><br>
	비밀번호 <input type="password" name="pwd"><br>
	이메일 <input type="text" name="email"><br>
	<input type="submit" value="가입">
</form>
<script type="text/javascript">
	/*
	function idcheck(){
		$.ajax({
			url:"idcheck.jsp?id="+$("#id").val(),
			dataType:"xml",
			success:function(data){
				let istrue= $(data).find("using").html();
				console.log(istrue)
				if(istrue=="true"){
					$("#idcheck").html("이미 존재하는 아이디입니다.")
				}else{
					$("#idcheck").html("사용가능한 아이디입니다.")
				}
			}
		})
	}
	*/
	$(function(){
		$("input[value='중복확인']").click(function(){
	/*
			var id=$("#id").val();
			if(id=="") return;
			$.ajax({
				url:"idcheck.jsp",
				method:"get",//get방식인경우 method생략가능
				//data:"id="+id,
				data:{"id":id},//파라미터전송하기
				dataType:"xml",//응답결과가 xml인경우에는 dataType생략가능
				success:function(data){
					const using=$(data).find("using").text();
					if(using=='true'){
						$("#idcheck").html("사용중인아이디입니다.")
					}else{
						$("#idcheck").html("사용가능한 아이디입니다.")
					}
				}
			})
		})
	})
	*/
	//jQuery.get(url [,data][,success][,dataType])
		var id=$("#id").val();
		$.get("idcheck.jsp",{"id":id},function(data){
			const using=$(data).find("using").text();
			if(using=='true'){
				$("#idcheck").html("사용중인아이디입니다.")
			}else{
				$("#idcheck").html("사용가능한 아이디입니다.")
			}
		},"xml")
	})
	})
</script>
</body>
</html>